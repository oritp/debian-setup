#!/bin/bash

sudo apt update

print "\nInstalling GNOME extensions..."

print "Installing gnome-shell-extension-installer..."
sudo curl -o /usr/local/bin/gnome-shell-extension-installer \
     https://raw.githubusercontent.com/brunelli/gnome-shell-extension-installer/master/gnome-shell-extension-installer
sudo chmod +x /usr/local/bin/gnome-shell-extension-installer

print "Installing extension Dash to Dock..."
gnome-shell-extension-installer 307 -y

print "Activating extension Dash to Dock..."
gnome-extensions enable dash-to-dock@micxgx.gmail.com

print "\nInstalling Arc theme..."
sudo apt install -y arc-theme

print "\nInstalling Newaita icons..."
git clone https://github.com/cbrnix/Newaita.git
cd Newaita
sudo mv Newaita/ /usr/share/icons/
sudo mv Newaita-dark/ /usr/share/icons/

print "\nApplying the new appearance..."
if command -v gsettings &> /dev/null; then
    gsettings set org.gnome.desktop.interface gtk-theme "Arc"
    gsettings set org.gnome.desktop.wm.preferences theme "Arc"
    gsettings set org.gnome.desktop.interface icon-theme "Newaita"
    print "Settings applied. Please log in again if you don't see the changes."
else
    print "No gsettings detected. Apply themes manually from GNOME Tweaks."
fi

print "\nEverything installed and configured!"
print "Reboot GNOME Shell (Alt+F2, write 'r' and then press Enter) or log in again to apply the changes."